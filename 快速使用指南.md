# å¿«é€Ÿä½¿ç”¨æŒ‡å— ğŸš€

## âœ… ç³»çµ±ç‹€æ…‹ï¼šå°±ç·’ï¼

æ‰€æœ‰å•é¡Œå·²ä¿®å¾©ï¼ŒF5-TTS æ¸¬è©¦å·²æˆåŠŸé€šéï¼

---

## ğŸ¯ ç«‹å³é–‹å§‹

```bash
cd /Users/raychang/Documents/å°ˆæ¡ˆ/Deep-Video-TranslationDocker
source .venv/bin/activate

# å¿«é€Ÿæ¸¬è©¦ï¼ˆ1åˆ†é˜ï¼‰
python test_f5tts_standalone.py --quick

# æ’­æ”¾çµæœ
afplay temp/quick_test_output.wav
```

---

## ğŸ“‹ ä¸‰ç¨®æ¸¬è©¦æ–¹å¼

### 1. å¿«é€Ÿæ¸¬è©¦ âš¡

```bash
python test_f5tts_standalone.py --quick
```

**æ™‚é–“**: ~1 åˆ†é˜  
**ç”¨é€”**: é©—è­‰ç³»çµ±æ˜¯å¦æ­£å¸¸

### 2. å®Œæ•´æ¸¬è©¦ ğŸ“Š

```bash
python test_f5tts_standalone.py
```

**æ™‚é–“**: ~5 åˆ†é˜  
**æ¸¬è©¦**: 4å€‹æ¡ˆä¾‹ï¼ˆä¸­æ–‡ã€è‹±æ–‡ã€æ··åˆã€é•·æ–‡æœ¬ï¼‰

### 3. è‡ªå®šç¾©æ¸¬è©¦ âœï¸

```bash
python test_f5tts_standalone.py --text "æ‚¨æƒ³è¦åˆæˆçš„ä»»ä½•æ–‡å­—"
```

---

## ğŸ¬ ä½¿ç”¨ class3.mp4

### è‡ªå‹•ä½¿ç”¨

è…³æœ¬æœƒ**è‡ªå‹•æª¢æ¸¬** `class3.mp4` ä¸¦ä½¿ç”¨ï¼

```bash
# åªéœ€ç¢ºä¿æ–‡ä»¶åœ¨ç›®éŒ„ä¸­
ls class3.mp4

# é‹è¡Œæ¸¬è©¦ï¼Œæœƒè‡ªå‹•ä½¿ç”¨
python test_f5tts_standalone.py --quick

# è¼¸å‡ºæœƒé¡¯ç¤º:
# âœ¨ åƒè€ƒéŸ³é »: å¾ class3.mp4 æå–
```

### æå‡è³ªé‡ï¼ˆå¯é¸ï¼‰

ç²å–è¦–é »çš„å¯¦éš›æ–‡å­—å…§å®¹ï¼š

```bash
# æå–åƒè€ƒæ–‡å­—
python get_ref_text_from_video.py class3.mp4

# æŸ¥çœ‹ä¿å­˜çš„æ–‡å­—
cat ref_text.txt

# è¤‡è£½æ–‡å­—ä¸¦æ›´æ–°åˆ° test_f5tts_standalone.py ç¬¬ 26 è¡Œ
```

---

## ğŸ“ è¼¸å‡ºæ–‡ä»¶

æ‰€æœ‰ç”Ÿæˆçš„éŸ³é »åœ¨ `temp/` ç›®éŒ„ï¼š

```bash
temp/
â”œâ”€â”€ quick_test_output.wav        # å¿«é€Ÿæ¸¬è©¦è¼¸å‡º âœ…
â”œâ”€â”€ test_output_ä¸­æ–‡æ¸¬è©¦.wav     # å®Œæ•´æ¸¬è©¦è¼¸å‡º
â”œâ”€â”€ test_output_è‹±æ–‡æ¸¬è©¦.wav
â””â”€â”€ ...
```

### æ’­æ”¾éŸ³é »

```bash
# macOS
afplay temp/quick_test_output.wav
afplay temp/test_output_*.wav

# æˆ–æ‰“é–‹æ–‡ä»¶å¤¾
open temp/
```

---

## ğŸ”§ å·²ä¿®å¾©çš„å•é¡Œ

### âœ… TorchCodec å•é¡Œ

- **å•é¡Œ**: Mac M4 ç„¡æ³•è¼‰å…¥ FFmpeg åº«
- **è§£æ±º**: å¸è¼‰ torchcodecï¼Œä½¿ç”¨ soundfile/librosa
- **ç‹€æ…‹**: âœ… å·²ä¿®å¾©

### âœ… éŸ³é »åŠ è¼‰å•é¡Œ

- **å•é¡Œ**: F5-TTS å˜—è©¦ä½¿ç”¨ä¸å¯ç”¨çš„å¾Œç«¯
- **è§£æ±º**: ä¿®æ”¹ F5-TTS æºç¢¼ä½¿ç”¨ soundfile
- **ç‹€æ…‹**: âœ… å·²ä¿®å¾©

---

## âš ï¸ å¯ä»¥å¿½ç•¥çš„è­¦å‘Š

é‹è¡Œæ™‚å¯èƒ½çœ‹åˆ°ä»¥ä¸‹è­¦å‘Šï¼Œ**ä¸å½±éŸ¿åŠŸèƒ½**ï¼š

1. **PYTHONHASHSEED è­¦å‘Š** - multiprocessing ç›¸é—œ
2. **resource_tracker è­¦å‘Š** - è³‡æºæ¸…ç†è­¦å‘Š
3. **Python ç‰ˆæœ¬è­¦å‘Š** - 2026 å¹´æ‰éœ€è¦å‡ç´š

é€™äº›éƒ½æ˜¯éé—œéµè­¦å‘Šï¼ŒéŸ³é »å·²æˆåŠŸç”Ÿæˆï¼

---

## ğŸ“– å®Œæ•´æ–‡æª”

| æ–‡æª” | ç”¨é€” |
|------|------|
| [æ¸¬è©¦æˆåŠŸå ±å‘Š](./æ¸¬è©¦æˆåŠŸå ±å‘Š.md) | ä¿®å¾©è©³æƒ…å’Œæ¸¬è©¦çµæœ |
| [ä½¿ç”¨ class3.mp4 æ¸¬è©¦èªªæ˜](./ä½¿ç”¨class3.mp4æ¸¬è©¦èªªæ˜.md) | class3.mp4 ä½¿ç”¨æŒ‡å— |
| [F5-TTS æ¸¬è©¦æŒ‡å—](./F5TTS_æ¸¬è©¦æŒ‡å—.md) | å®Œæ•´æ¸¬è©¦æ–‡æª” |
| [TorchCodec å•é¡Œè§£æ±ºæ–¹æ¡ˆ](./TorchCodecå•é¡Œè§£æ±ºæ–¹æ¡ˆ.md) | å•é¡Œåˆ†æå’Œè§£æ±º |

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### é–‹å§‹è¦–é »ç¿»è­¯

```bash
# å•Ÿå‹•ä¸»æ‡‰ç”¨
streamlit run app.py

# åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹ http://localhost:8501
# ä¸Šå‚³è¦–é »ä¸¦é–‹å§‹ç¿»è­¯ï¼
```

### æ‰¹é‡æ¸¬è©¦

```bash
# æ¸¬è©¦å¤šå€‹æ–‡å­—
cat > my_texts.txt << EOF
é€™æ˜¯ç¬¬ä¸€å€‹æ¸¬è©¦
é€™æ˜¯ç¬¬äºŒå€‹æ¸¬è©¦
é€™æ˜¯ç¬¬ä¸‰å€‹æ¸¬è©¦
EOF

# æ‰¹é‡ç”Ÿæˆ
while read line; do
    python test_f5tts_standalone.py --text "$line"
done < my_texts.txt
```

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. æå‡éŸ³é »è³ªé‡

- âœ… ä½¿ç”¨çœŸå¯¦äººè²ä½œç‚ºåƒè€ƒéŸ³é »ï¼ˆclass3.mp4ï¼‰
- âœ… æä¾›æº–ç¢ºçš„ ref_text
- âœ… é¸æ“‡æ¸…æ™°çš„éŸ³é »ç‰‡æ®µï¼ˆç„¡å™ªéŸ³ï¼‰

### 2. å„ªåŒ–æ€§èƒ½

- âœ… ä½¿ç”¨ MPS åŠ é€Ÿï¼ˆMac M4 Proï¼‰
- âœ… è™•ç†è¼ƒçŸ­çš„æ–‡æœ¬ï¼ˆ< 100 å­—ï¼‰
- âœ… åŠæ™‚æ¸…ç†è‡¨æ™‚æ–‡ä»¶

### 3. é¿å…å•é¡Œ

- âœ… ä¸è¦é‡æ–°å®‰è£ torchcodec
- âœ… ç¢ºä¿è™›æ“¬ç’°å¢ƒå·²æ¿€æ´»
- âœ… æª¢æŸ¥ç£ç¢Ÿç©ºé–“ï¼ˆæ¨¡å‹ç´„ 500MBï¼‰

---

## ğŸ› é‡åˆ°å•é¡Œï¼Ÿ

### 1. æ¸¬è©¦å¤±æ•—

```bash
# æª¢æŸ¥ä¾è³´
python test_f5tts_dependencies.py

# é‡æ–°æ¸¬è©¦
python test_f5tts_standalone.py --quick
```

### 2. éŸ³é »ç„¡è²éŸ³

```bash
# æª¢æŸ¥æ–‡ä»¶å¤§å°
ls -lh temp/quick_test_output.wav

# å¦‚æœå¾ˆå° (< 10KB)ï¼ŒæŸ¥çœ‹æ—¥èªŒ
python test_f5tts_standalone.py --quick 2>&1 | tee test.log
```

### 3. è¨˜æ†¶é«”ä¸è¶³

```bash
# ä½¿ç”¨è¼ƒçŸ­çš„æ–‡æœ¬
python test_f5tts_standalone.py --text "çŸ­æ–‡æœ¬æ¸¬è©¦"

# æˆ–é‡å•Ÿ Python
```

---

## âœ¨ ç¸½çµ

### ç¾åœ¨å¯ä»¥ï¼š

- âœ… é‹è¡Œ F5-TTS æ¸¬è©¦
- âœ… ç”ŸæˆèªéŸ³åˆæˆ
- âœ… ä½¿ç”¨ class3.mp4 ä½œç‚ºåƒè€ƒ
- âœ… é–‹å§‹è¦–é »ç¿»è­¯é …ç›®

### ä¸€æ¢å‘½ä»¤æå®šï¼š

```bash
python test_f5tts_standalone.py --quick && afplay temp/quick_test_output.wav
```

**äº«å—é«˜è³ªé‡çš„èªéŸ³åˆæˆï¼** ğŸ¤âœ¨

---

*æœ€å¾Œæ›´æ–°: 2024-12-24*  
*ç‹€æ…‹: âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸*

